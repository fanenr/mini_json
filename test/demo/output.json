[{"expected": {}, "patch": [], "doc": {}, "comment": "empty list, empty docs"}, {"expected": {"foo": 1.000000}, "patch": [], "doc": {"foo": 1.000000}, "comment": "empty patch list"}, {"expected": {"foo": 1.000000, "bar": 2.000000}, "patch": [], "doc": {"bar": 2.000000, "foo": 1.000000}, "comment": "rearrangements OK?"}, {"expected": [{"foo": 1.000000, "bar": 2.000000}], "patch": [], "doc": [{"bar": 2.000000, "foo": 1.000000}], "comment": "rearrangements OK?  How about one level down ... array"}, {"expected": {"foo": {"foo": 1.000000, "bar": 2.000000}}, "patch": [], "doc": {"foo": {"bar": 2.000000, "foo": 1.000000}}, "comment": "rearrangements OK?  How about one level down..."}, {"expected": {"foo": 1.000000}, "patch": [{"path": "/foo", "value": 1.000000, "op": "add"}], "doc": {"foo": null}, "comment": "add replaces any existing field"}, {"expected": ["foo"], "patch": [{"path": "/0", "value": "foo", "op": "add"}], "doc": [], "comment": "toplevel array"}, {"expected": ["foo"], "patch": [], "doc": ["foo"], "comment": "toplevel array, no change"}, {"expected": {"foo": "1"}, "patch": [{"path": "/foo", "value": "1", "op": "add"}], "doc": {}, "comment": "toplevel object, numeric string"}, {"expected": {"foo": 1.000000}, "patch": [{"path": "/foo", "value": 1.000000, "op": "add"}], "doc": {}, "comment": "toplevel object, integer"}, {"disabled": true, "expected": "bar", "patch": [{"path": "", "value": "bar", "op": "replace"}], "doc": "foo", "comment": "Toplevel scalar values OK?"}, {"expected": [], "patch": [{"path": "", "value": [], "op": "add"}], "doc": {}, "comment": "replace object document with array document?"}, {"expected": {}, "patch": [{"path": "", "value": {}, "op": "add"}], "doc": [], "comment": "replace array document with object document?"}, {"expected": ["hi"], "patch": [{"path": "/-", "value": "hi", "op": "add"}], "doc": [], "comment": "append to root array document?"}, {"expected": {"": 1.000000}, "patch": [{"path": "/", "value": 1.000000, "op": "add"}], "doc": {}, "comment": "Add, / target"}, {"expected": {"foo": {"": 1.000000}}, "patch": [{"path": "/foo/", "value": 1.000000, "op": "add"}], "doc": {"foo": {}}, "comment": "Add, /foo/ deep target (trailing slash)"}, {"expected": {"bar": [1.000000, 2.000000], "foo": 1.000000}, "patch": [{"path": "/bar", "value": [1.000000, 2.000000], "op": "add"}], "doc": {"foo": 1.000000}, "comment": "Add composite value at top level"}, {"expected": {"baz": [{"foo": "world", "qux": "hello"}], "foo": 1.000000}, "patch": [{"path": "/baz/0/foo", "value": "world", "op": "add"}], "doc": {"baz": [{"qux": "hello"}], "foo": 1.000000}, "comment": "Add into composite value"}, {"error": "Out of bounds (upper)", "patch": [{"path": "/bar/8", "value": "5", "op": "add"}], "doc": {"bar": [1.000000, 2.000000]}}, {"error": "Out of bounds (lower)", "patch": [{"path": "/bar/-1", "value": "5", "op": "add"}], "doc": {"bar": [1.000000, 2.000000]}}, {"expected": {"bar": true, "foo": 1.000000}, "patch": [{"path": "/bar", "value": true, "op": "add"}], "doc": {"foo": 1.000000}}, {"expected": {"bar": false, "foo": 1.000000}, "patch": [{"path": "/bar", "value": false, "op": "add"}], "doc": {"foo": 1.000000}}, {"expected": {"bar": null, "foo": 1.000000}, "patch": [{"path": "/bar", "value": null, "op": "add"}], "doc": {"foo": 1.000000}}, {"expected": {"0": "bar", "foo": 1.000000}, "patch": [{"path": "/0", "value": "bar", "op": "add"}], "doc": {"foo": 1.000000}, "comment": "0 can be an array index or object element name"}, {"expected": ["foo", "bar"], "patch": [{"path": "/1", "value": "bar", "op": "add"}], "doc": ["foo"]}, {"expected": ["foo", "bar", "sil"], "patch": [{"path": "/1", "value": "bar", "op": "add"}], "doc": ["foo", "sil"]}, {"expected": ["bar", "foo", "sil"], "patch": [{"path": "/0", "value": "bar", "op": "add"}], "doc": ["foo", "sil"]}, {"expected": ["foo", "sil", "bar"], "patch": [{"path": "/2", "value": "bar", "op": "add"}], "doc": ["foo", "sil"], "comment": "push item to array via last index + 1"}, {"error": "index is greater than number of items in array", "patch": [{"path": "/3", "value": "bar", "op": "add"}], "doc": ["foo", "sil"], "comment": "add item to array at index > length should fail"}, {"expected": {"1e0": "foo"}, "patch": [{"path": "/1e0", "value": "foo", "op": "test"}], "doc": {"1e0": "foo"}, "comment": "test against implementation-specific numeric parsing"}, {"error": "test op shouldn't get array element 1", "patch": [{"path": "/1e0", "value": "bar", "op": "test"}], "doc": ["foo", "bar"], "comment": "test with bad number should fail"}, {"error": "Object operation on array target", "patch": [{"path": "/bar", "value": 42.000000, "op": "add"}], "doc": ["foo", "sil"]}, {"comment": "value in array add not flattened", "expected": ["foo", ["bar", "baz"], "sil"], "patch": [{"path": "/1", "value": ["bar", "baz"], "op": "add"}], "doc": ["foo", "sil"]}, {"expected": {"foo": 1.000000}, "patch": [{"path": "/bar", "op": "remove"}], "doc": {"bar": [1.000000, 2.000000, 3.000000, 4.000000], "foo": 1.000000}}, {"expected": {"baz": [{}], "foo": 1.000000}, "patch": [{"path": "/baz/0/qux", "op": "remove"}], "doc": {"baz": [{"qux": "hello"}], "foo": 1.000000}}, {"expected": {"baz": [{"qux": "hello"}], "foo": [1.000000, 2.000000, 3.000000, 4.000000]}, "patch": [{"path": "/foo", "value": [1.000000, 2.000000, 3.000000, 4.000000], "op": "replace"}], "doc": {"baz": [{"qux": "hello"}], "foo": 1.000000}}, {"expected": {"baz": [{"qux": "world"}], "foo": [1.000000, 2.000000, 3.000000, 4.000000]}, "patch": [{"path": "/baz/0/qux", "value": "world", "op": "replace"}], "doc": {"baz": [{"qux": "hello"}], "foo": [1.000000, 2.000000, 3.000000, 4.000000]}}, {"expected": ["bar"], "patch": [{"path": "/0", "value": "bar", "op": "replace"}], "doc": ["foo"]}, {"expected": [0.000000], "patch": [{"path": "/0", "value": 0.000000, "op": "replace"}], "doc": [""]}, {"expected": [true], "patch": [{"path": "/0", "value": true, "op": "replace"}], "doc": [""]}, {"expected": [false], "patch": [{"path": "/0", "value": false, "op": "replace"}], "doc": [""]}, {"expected": [null], "patch": [{"path": "/0", "value": null, "op": "replace"}], "doc": [""]}, {"comment": "value in array replace not flattened", "expected": ["foo", ["bar", "baz"]], "patch": [{"path": "/1", "value": ["bar", "baz"], "op": "replace"}], "doc": ["foo", "sil"]}, {"expected": {"baz": "qux"}, "patch": [{"path": "", "value": {"baz": "qux"}, "op": "replace"}], "doc": {"foo": "bar"}, "comment": "replace whole document"}, {"error": "replace op should fail with missing parent key", "patch": [{"path": "/foo/bar", "value": false, "op": "replace"}], "doc": {"bar": "baz"}, "comment": "test replace with missing parent key should fail"}, {"expected": {"foo": 1.000000}, "patch": [{"spurious": 1.000000, "path": "/foo", "value": 1.000000, "op": "test"}], "doc": {"foo": 1.000000}, "comment": "spurious patch properties"}, {"comment": "null value should be valid obj property", "expected": {"foo": null}, "patch": [{"path": "/foo", "value": null, "op": "test"}], "doc": {"foo": null}}, {"comment": "null value should be valid obj property to be replaced with something truthy", "expected": {"foo": "truthy"}, "patch": [{"path": "/foo", "value": "truthy", "op": "replace"}], "doc": {"foo": null}}, {"comment": "null value should be valid obj property to be moved", "expected": {"bar": null}, "patch": [{"path": "/bar", "from": "/foo", "op": "move"}], "doc": {"foo": null}}, {"comment": "null value should be valid obj property to be copied", "expected": {"bar": null, "foo": null}, "patch": [{"path": "/bar", "from": "/foo", "op": "copy"}], "doc": {"foo": null}}, {"comment": "null value should be valid obj property to be removed", "expected": {}, "patch": [{"path": "/foo", "op": "remove"}], "doc": {"foo": null}}, {"comment": "null value should still be valid obj property replace other value", "expected": {"foo": null}, "patch": [{"path": "/foo", "value": null, "op": "replace"}], "doc": {"foo": "bar"}}, {"comment": "test should pass despite rearrangement", "expected": {"foo": {"bar": 2.000000, "foo": 1.000000}}, "patch": [{"path": "/foo", "value": {"foo": 1.000000, "bar": 2.000000}, "op": "test"}], "doc": {"foo": {"bar": 2.000000, "foo": 1.000000}}}, {"comment": "test should pass despite (nested) rearrangement", "expected": {"foo": [{"bar": 2.000000, "foo": 1.000000}]}, "patch": [{"path": "/foo", "value": [{"foo": 1.000000, "bar": 2.000000}], "op": "test"}], "doc": {"foo": [{"bar": 2.000000, "foo": 1.000000}]}}, {"comment": "test should pass - no error", "expected": {"foo": {"bar": [1.000000, 2.000000, 5.000000, 4.000000]}}, "patch": [{"path": "/foo", "value": {"bar": [1.000000, 2.000000, 5.000000, 4.000000]}, "op": "test"}], "doc": {"foo": {"bar": [1.000000, 2.000000, 5.000000, 4.000000]}}}, {"error": "test op should fail", "patch": [{"path": "/foo", "value": [1.000000, 2.000000], "op": "test"}], "doc": {"foo": {"bar": [1.000000, 2.000000, 5.000000, 4.000000]}}}, {"disabled": true, "patch": [{"path": "", "value": {"foo": 1.000000}, "op": "test"}], "doc": {"foo": 1.000000}, "comment": "Whole document"}, {"expected": {"": 1.000000}, "patch": [{"path": "/", "value": 1.000000, "op": "test"}], "doc": {"": 1.000000}, "comment": "Empty-string element"}, {"expected": {"m~n": 8.000000, "k\"l": 6.000000, "i\j": 5.000000, "g|h": 4.000000, "e^f": 3.000000, "c%d": 2.000000, "foo": ["bar", "baz"], "a/b": 1.000000, " ": 7.000000, "": 0.000000}, "patch": [{"path": "/foo", "value": ["bar", "baz"], "op": "test"}, {"path": "/foo/0", "value": "bar", "op": "test"}, {"path": "/", "value": 0.000000, "op": "test"}, {"path": "/a~1b", "value": 1.000000, "op": "test"}, {"path": "/c%d", "value": 2.000000, "op": "test"}, {"path": "/e^f", "value": 3.000000, "op": "test"}, {"path": "/g|h", "value": 4.000000, "op": "test"}, {"path": "/i\j", "value": 5.000000, "op": "test"}, {"path": "/k\"l", "value": 6.000000, "op": "test"}, {"path": "/ ", "value": 7.000000, "op": "test"}, {"path": "/m~0n", "value": 8.000000, "op": "test"}], "doc": {"m~n": 8.000000, " ": 7.000000, "k\"l": 6.000000, "i\j": 5.000000, "g|h": 4.000000, "e^f": 3.000000, "c%d": 2.000000, "": 0.000000, "a/b": 1.000000, "foo": ["bar", "baz"]}}, {"expected": {"foo": 1.000000}, "patch": [{"path": "/foo", "from": "/foo", "op": "move"}], "doc": {"foo": 1.000000}, "comment": "Move to same location has no effect"}, {"expected": {"bar": 1.000000, "baz": [{"qux": "hello"}]}, "patch": [{"path": "/bar", "from": "/foo", "op": "move"}], "doc": {"baz": [{"qux": "hello"}], "foo": 1.000000}}, {"expected": {"bar": 1.000000, "baz": [{}, "hello"]}, "patch": [{"path": "/baz/1", "from": "/baz/0/qux", "op": "move"}], "doc": {"bar": 1.000000, "baz": [{"qux": "hello"}]}}, {"expected": {"boo": {"qux": "hello"}, "bar": 1.000000, "baz": [{"qux": "hello"}]}, "patch": [{"path": "/boo", "from": "/baz/0", "op": "copy"}], "doc": {"bar": 1.000000, "baz": [{"qux": "hello"}]}}, {"expected": {"baz": "qux"}, "patch": [{"path": "", "value": {"baz": "qux"}, "op": "add"}], "doc": {"foo": "bar"}, "comment": "replacing the root of the document is possible with add"}, {"expected": [1.000000, 2.000000, {"foo": ["bar", "baz"]}], "patch": [{"path": "/-", "value": {"foo": ["bar", "baz"]}, "op": "add"}], "doc": [1.000000, 2.000000], "comment": "Adding to \"/-\" adds to the end of the array"}, {"expected": [1.000000, 2.000000, [3.000000, [4.000000, 5.000000, {"foo": ["bar", "baz"]}]]], "patch": [{"path": "/2/1/-", "value": {"foo": ["bar", "baz"]}, "op": "add"}], "doc": [1.000000, 2.000000, [3.000000, [4.000000, 5.000000]]], "comment": "Adding to \"/-\" adds to the end of the array, even n levels down"}, {"error": "remove op shouldn't remove from array with bad number", "patch": [{"path": "/baz/1e0/qux", "op": "remove"}], "doc": {"baz": [{"qux": "hello"}], "foo": 1.000000}, "comment": "test remove with bad number should fail"}, {"expected": [2.000000, 3.000000, 4.000000], "patch": [{"path": "/0", "op": "remove"}], "doc": [1.000000, 2.000000, 3.000000, 4.000000], "comment": "test remove on array"}, {"expected": [1.000000, 3.000000], "patch": [{"path": "/1", "op": "remove"}, {"path": "/2", "op": "remove"}], "doc": [1.000000, 2.000000, 3.000000, 4.000000], "comment": "test repeated removes"}, {"error": "remove op shouldn't remove from array with bad number", "patch": [{"path": "/1e0", "op": "remove"}], "doc": [1.000000, 2.000000, 3.000000, 4.000000], "comment": "test remove with bad index should fail"}, {"error": "replace op shouldn't replace in array with bad number", "patch": [{"path": "/1e0", "value": false, "op": "replace"}], "doc": [""], "comment": "test replace with bad number should fail"}, {"error": "copy op shouldn't work with bad number", "patch": [{"path": "/boo", "from": "/baz/1e0", "op": "copy"}], "doc": {"bar": 1.000000, "baz": [1.000000, 2.000000, 3.000000]}, "comment": "test copy with bad number should fail"}, {"error": "move op shouldn't work with bad number", "patch": [{"path": "/foo", "from": "/baz/1e0", "op": "move"}], "doc": {"baz": [1.000000, 2.000000, 3.000000, 4.000000], "foo": 1.000000}, "comment": "test move with bad number should fail"}, {"error": "add op shouldn't add to array with bad number", "patch": [{"path": "/1e0", "value": "bar", "op": "add"}], "doc": ["foo", "sil"], "comment": "test add with bad number should fail"}, {"error": "missing 'value' parameter", "patch": [{"path": "/-", "op": "add"}], "doc": [1.000000], "comment": "missing 'value' parameter to add"}, {"error": "missing 'value' parameter", "patch": [{"path": "/0", "op": "replace"}], "doc": [1.000000], "comment": "missing 'value' parameter to replace"}, {"error": "missing 'value' parameter", "patch": [{"path": "/0", "op": "test"}], "doc": [null], "comment": "missing 'value' parameter to test"}, {"error": "missing 'value' parameter", "patch": [{"path": "/0", "op": "test"}], "doc": [false], "comment": "missing value parameter to test - where undef is falsy"}, {"error": "missing 'from' parameter", "patch": [{"path": "/-", "op": "copy"}], "doc": [1.000000], "comment": "missing from parameter to copy"}, {"error": "missing 'from' location", "patch": [{"path": "/foo", "from": "/bar", "op": "copy"}], "doc": {"foo": 1.000000}, "comment": "missing from location to copy"}, {"error": "missing 'from' parameter", "patch": [{"path": "", "op": "move"}], "doc": {"foo": 1.000000}, "comment": "missing from parameter to move"}, {"error": "missing 'from' location", "patch": [{"path": "/foo", "from": "/bar", "op": "move"}], "doc": {"foo": 1.000000}, "comment": "missing from location to move"}, {"disabled": true, "error": "patch has two 'op' members", "patch": [{"path": "/baz", "from": "/foo", "value": "qux", "op": "add"}], "doc": {"foo": "bar"}, "comment": "duplicate ops"}, {"error": "Unrecognized op 'spam'", "patch": [{"path": "/foo", "value": 1.000000, "op": "spam"}], "doc": {"foo": 1.000000}, "comment": "unrecognized op should fail"}, {"error": "test op should reject the array value, it has leading zeros", "patch": [{"path": "/00", "value": "foo", "op": "test"}], "doc": ["foo", "bar"], "comment": "test with bad array number that has leading zeros"}, {"error": "test op should reject the array value, it has leading zeros", "patch": [{"path": "/01", "value": "bar", "op": "test"}], "doc": ["foo", "bar"], "comment": "test with bad array number that has leading zeros"}, {"error": "removing a nonexistent field should fail", "patch": [{"path": "/baz", "op": "remove"}], "doc": {"foo": "bar"}, "comment": "Removing nonexistent field"}, {"error": "removing a nonexistent index should fail", "patch": [{"path": "/2", "op": "remove"}], "doc": ["foo", "bar"], "comment": "Removing nonexistent index"}, {"expected": {"FOO": "BAR", "foo": "bar"}, "patch": [{"path": "/FOO", "value": "BAR", "op": "add"}], "doc": {"foo": "bar"}, "comment": "Patch with different capitalisation than doc"}]